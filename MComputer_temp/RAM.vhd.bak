LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.STD_LOGIC_ARITH.ALL;
USE IEEE.STD_LOGIC_UNSIGNED.ALL;

ENTITY RAM IS
PORT(
	WR,CS: IN STD_LOGIC;
   DIN: IN STD_LOGIC_VECTOR(7 DOWNTO 0);
   DOUT: OUT STD_LOGIC_VECTOR(7 DOWNTO 0);
   ADDR: IN STD_LOGIC_VECTOR(2 DOWNTO 0) --MAR_OUT
);
END;

ARCHITECTURE A OF RAM IS
TYPE MEMORY IS ARRAY(0 TO 4) OF STD_LOGIC_VECTOR(7 DOWNTO 0); --MEMORY为数组
BEGIN
   PROCESS(CS,WR)
   VARIABLE MEM:MEMORY;
   BEGIN
      IF(CS='0') THEN
        IF(WR='0') THEN
          MEM(CONV_INTEGER(ADDR(2 DOWNTO 0))):=DIN; --强制类型转换为整数
        ELSIF(WR='1') THEN
          DOUT <= MEM(CONV_INTEGER(ADDR(2 DOWNTO 0)));
		  END IF;
		END IF;
	END PROCESS;
END A;
